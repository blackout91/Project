<!DOCTYPE html>

<html xmlns='http://www.w3.org/1999/xhtml'>

  <head>

    <title>Code coverage for Main</title>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />

    <script src='./assets/0.10.2/application.js' type='text/javascript'></script>    

    <link href='./assets/0.10.2/application.css' media='screen, projection, print' rel='stylesheet' type='text/css'>

    <link rel="shortcut icon" type="image/png" href="./assets/0.10.2/favicon_red.png" />

    <link rel="icon" type="image/png" href="./assets/0.10.2/favicon.png" />

  </head>

  

  <body>

    <div id="loading">

      <img src="./assets/0.10.2/loading.gif" alt="loading"/>

    </div>

    <div id="wrapper" style="display:none;">

      <div class="timestamp">Generated <abbr class="timeago" title="2018-04-24T15:21:25+00:00">2018-04-24T15:21:25+00:00</abbr></div>

      <ul class="group_tabs"></ul>




      <div id="content">

        <div class="file_list_container" id="AllFiles">

  <h2>

    <span class="group_name">All Files</span>

    (<span class="covered_percent"><span class="red">47.08%</span></span>

     covered at

     <span class="covered_strength">

       <span class="green">

         2.29

       </span>

    </span> hits/line)

  </h2>

  <a name="AllFiles"></a>

  <div>

    <b>9</b> files in total.

    <b>359</b> relevant lines. 

    <span class="green"><b>169</b> lines covered</span> and

    <span class="red"><b>190</b> lines missed </span>

  </div>

  <table class="file_list">

    <thead>

      <tr>

        <th>File</th>

        <th>% covered</th>

        <th>Lines</th>

        <th>Relevant Lines</th>

        <th>Lines covered</th>

        <th>Lines missed</th>

        <th>Avg. Hits / Line</th>

      </tr>

    </thead>

    <tbody>

      

      <tr>

        <td class="strong"><a href="#60f6883925370f3f4394e55f6d396be03f235d80" class="src_link" title="main.rb">main.rb</a></td>

        <td class="yellow strong">82.22 %</td>

        <td>77</td>

        <td>45</td>

        <td>37</td>

        <td>8</td>

        <td>8.5</td>

      </tr>

      

      <tr>

        <td class="strong"><a href="#3923d475674caac9ed6dde6e9585df6e4d24e35e" class="src_link" title="ruby/customer/methods.rb">ruby/customer/methods.rb</a></td>

        <td class="green strong">100.0 %</td>

        <td>0</td>

        <td>0</td>

        <td>0</td>

        <td>0</td>

        <td>0.0</td>

      </tr>

      

      <tr>

        <td class="strong"><a href="#a05b76a25cd459541248bbc908d5ab1bd4992047" class="src_link" title="ruby/customer/nav.rb">ruby/customer/nav.rb</a></td>

        <td class="green strong">100.0 %</td>

        <td>20</td>

        <td>14</td>

        <td>14</td>

        <td>0</td>

        <td>2.1</td>

      </tr>

      

      <tr>

        <td class="strong"><a href="#9d0bbaed09bef765274a284b76cc8588ea9f40a9" class="src_link" title="ruby/employee/admin/methods.rb">ruby/employee/admin/methods.rb</a></td>

        <td class="red strong">6.25 %</td>

        <td>156</td>

        <td>80</td>

        <td>5</td>

        <td>75</td>

        <td>0.1</td>

      </tr>

      

      <tr>

        <td class="strong"><a href="#fbf5b7e1cbf6bcf371f68816b1bdefae39db810f" class="src_link" title="ruby/employee/admin/nav.rb">ruby/employee/admin/nav.rb</a></td>

        <td class="green strong">100.0 %</td>

        <td>51</td>

        <td>40</td>

        <td>40</td>

        <td>0</td>

        <td>2.3</td>

      </tr>

      

      <tr>

        <td class="strong"><a href="#2651f4e9e64456c42f78c78d87ef8ac9c4b7cdca" class="src_link" title="ruby/employee/methods.rb">ruby/employee/methods.rb</a></td>

        <td class="red strong">18.37 %</td>

        <td>157</td>

        <td>98</td>

        <td>18</td>

        <td>80</td>

        <td>0.6</td>

      </tr>

      

      <tr>

        <td class="strong"><a href="#1f372eaf8b82c8e46ba88d623d8477a04ae4b55b" class="src_link" title="ruby/employee/nav.rb">ruby/employee/nav.rb</a></td>

        <td class="green strong">100.0 %</td>

        <td>26</td>

        <td>18</td>

        <td>18</td>

        <td>0</td>

        <td>1.4</td>

      </tr>

      

      <tr>

        <td class="strong"><a href="#d42602e71d27f36c5dcb02df3b4f988174feb9dc" class="src_link" title="ruby/noLogin/methods.rb">ruby/noLogin/methods.rb</a></td>

        <td class="red strong">53.57 %</td>

        <td>39</td>

        <td>28</td>

        <td>15</td>

        <td>13</td>

        <td>5.7</td>

      </tr>

      

      <tr>

        <td class="strong"><a href="#9456f6c5c04ff75d88c4307ebc8446768a4d5b1e" class="src_link" title="ruby/noLogin/nav.rb">ruby/noLogin/nav.rb</a></td>

        <td class="red strong">61.11 %</td>

        <td>55</td>

        <td>36</td>

        <td>22</td>

        <td>14</td>

        <td>1.9</td>

      </tr>

      

    </tbody>

  </table>

</div>







        

      </div>

    

      <div id="footer">

        Generated by <a href="http://github.com/colszowka/simplecov">simplecov</a> v0.16.1 

        and simplecov-html v0.10.2<br/>

        using Cucumber Features

      </div>

    

      <div class="source_files">

      

        <div class="source_table" id="60f6883925370f3f4394e55f6d396be03f235d80">

  <div class="header">

    <h3>main.rb</h3>

    <h4><span class="yellow">82.22 %</span> covered</h4>

    <div>

      <b>45</b> relevant lines. 

      <span class="green"><b>37</b> lines covered</span> and

      <span class="red"><b>8</b> lines missed.</span>

    </div>

  </div>

  

  <pre>

    <ol>

      

        <li class="covered" data-hits="1" data-linenumber="1">

          <span class="hits">1</span>

          

          <code class="ruby">require &#39;sinatra&#39;</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="2">

          <span class="hits">1</span>

          

          <code class="ruby">require &#39;twitter&#39;</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="3">

          <span class="hits">1</span>

          

          <code class="ruby">require &#39;sqlite3&#39;</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="4">

          <span class="hits">1</span>

          

          <code class="ruby">set :bind, &#39;0.0.0.0&#39; # Only needed if you&#39;re running from Codio</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="5">

          <span class="hits">1</span>

          

          <code class="ruby">include ERB::Util</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="6">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="7">

          <span class="hits">1</span>

          

          <code class="ruby">enable :sessions</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="8">

          <span class="hits">1</span>

          

          <code class="ruby">set :session_secret, &#39;team31&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="9">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="10">

          <span class="hits">1</span>

          

          <code class="ruby">before do</code>

        </li>

      

        <li class="covered" data-hits="68" data-linenumber="11">

          <span class="hits">68</span>

          

          <code class="ruby">  config = {</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="12">

          

          

          <code class="ruby">      :consumer_key =&gt; &#39;6Vf0w722hYY499mXkT0574BcJ&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="13">

          

          

          <code class="ruby">      :consumer_secret =&gt; &#39;ACzgL8yT5HQ6vfd6jqyYE9Jgq8LcdFQaO2ZFMiHpwQuyG3rz5J&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="14">

          

          

          <code class="ruby">      :access_token =&gt; &#39;963448512376688640-L5p8C9TCNd4iyDrpuB6vFDPEg4vFbkD&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="15">

          

          

          <code class="ruby">      :access_token_secret =&gt; &#39;vAsgC9CZ5e2kk1CwWurKtIuidpCo4FcINbq2VMdAAtXb1&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="16">

          

          

          <code class="ruby">  }</code>

        </li>

      

        <li class="covered" data-hits="68" data-linenumber="17">

          <span class="hits">68</span>

          

          <code class="ruby">  @db = SQLite3::Database.new &#39;./public/db&#39;</code>

        </li>

      

        <li class="covered" data-hits="68" data-linenumber="18">

          <span class="hits">68</span>

          

          <code class="ruby">  @client = Twitter::REST::Client.new(config)</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="19">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="20">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="21">

          <span class="hits">1</span>

          

          <code class="ruby">require_relative &#39;ruby/noLogin/nav&#39;</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="22">

          <span class="hits">1</span>

          

          <code class="ruby">require_relative &#39;ruby/customer/nav&#39;</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="23">

          <span class="hits">1</span>

          

          <code class="ruby">require_relative &#39;ruby/employee/nav&#39;</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="24">

          <span class="hits">1</span>

          

          <code class="ruby">require_relative &#39;ruby/employee/admin/nav&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="25">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="26">

          <span class="hits">1</span>

          

          <code class="ruby">require_relative &#39;ruby/noLogin/methods&#39;</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="27">

          <span class="hits">1</span>

          

          <code class="ruby">require_relative &#39;ruby/customer/methods&#39;</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="28">

          <span class="hits">1</span>

          

          <code class="ruby">require_relative &#39;ruby/employee/methods&#39;</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="29">

          <span class="hits">1</span>

          

          <code class="ruby">require_relative &#39;ruby/employee/admin/methods&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="30">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="31">

          <span class="hits">1</span>

          

          <code class="ruby">not_found do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="32">

          

          

          <code class="ruby">  &#39;404 Page not found&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="33">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="34">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="35">

          <span class="hits">1</span>

          

          <code class="ruby">def getTweets</code>

        </li>

      

        <li class="covered" data-hits="3" data-linenumber="36">

          <span class="hits">3</span>

          

          <code class="ruby">  @tweets = Array.new</code>

        </li>

      

        <li class="covered" data-hits="3" data-linenumber="37">

          <span class="hits">3</span>

          

          <code class="ruby">  rawTweets = @client.mentions_timeline(tweet_mode: &quot;extended&quot;)</code>

        </li>

      

        <li class="covered" data-hits="3" data-linenumber="38">

          <span class="hits">3</span>

          

          <code class="ruby">  rawTweets.each do |tweet|</code>

        </li>

      

        <li class="covered" data-hits="54" data-linenumber="39">

          <span class="hits">54</span>

          

          <code class="ruby">    if tweet.attrs[:full_text].include? &quot;#order&quot; then</code>

        </li>

      

        <li class="covered" data-hits="24" data-linenumber="40">

          <span class="hits">24</span>

          

          <code class="ruby">      @tweets.push(tweet)</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="41">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="42">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="43">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="44">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="45">

          <span class="hits">1</span>

          

          <code class="ruby">def permissionAdmin</code>

        </li>

      

        <li class="covered" data-hits="14" data-linenumber="46">

          <span class="hits">14</span>

          

          <code class="ruby">    if session[:permission] != &quot;admin&quot; then</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="47">

          

          

          <code class="ruby">        redirect &quot;#{session[:permission]}/home&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="48">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="49">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="50">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="51">

          <span class="hits">1</span>

          

          <code class="ruby">def permissionEmployee</code>

        </li>

      

        <li class="covered" data-hits="8" data-linenumber="52">

          <span class="hits">8</span>

          

          <code class="ruby">  if session[:permission] != &quot;employee&quot; then</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="53">

          

          

          <code class="ruby">    redirect &quot;#{session[:permission]}/home&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="54">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="55">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="56">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="57">

          <span class="hits">1</span>

          

          <code class="ruby">def permissionCustomer</code>

        </li>

      

        <li class="covered" data-hits="6" data-linenumber="58">

          <span class="hits">6</span>

          

          <code class="ruby">  if session[:permission] != &quot;user&quot; then</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="59">

          

          

          <code class="ruby">    redirect &quot;#{session[:permission]}/home&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="60">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="61">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="62">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="63">

          <span class="hits">1</span>

          

          <code class="ruby">def permissionNav</code>

        </li>

      

        <li class="covered" data-hits="20" data-linenumber="64">

          <span class="hits">20</span>

          

          <code class="ruby">    if session[:permission] == &quot;admin&quot; </code>

        </li>

      

        <li class="covered" data-hits="12" data-linenumber="65">

          <span class="hits">12</span>

          

          <code class="ruby">        erb :&quot;template/adminNav&quot; </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="66">

          

          

          <code class="ruby">    else  </code>

        </li>

      

        <li class="covered" data-hits="8" data-linenumber="67">

          <span class="hits">8</span>

          

          <code class="ruby">        erb :&quot;template/employeeNav&quot; </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="68">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="69">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="70">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="71">

          <span class="hits">1</span>

          

          <code class="ruby">def printDetails(i)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="72">

          

          

          <code class="ruby">  @detailString = &quot;Details: &quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="73">

          

          

          <code class="ruby">  @orderdetails = @db.execute(&#39;SELECT itemID FROM orderdetails WHERE orderID = ?&#39;, [i])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="74">

          

          

          <code class="ruby">    @orderdetails.each do |detail|</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="75">

          

          

          <code class="ruby">      @detailString = @detailString + @db.get_first_value(&#39;SELECT item FROM menu WHERE itemID = ?&#39;, [detail]) + &quot;-&quot;  + @db.get_first_value(&#39;SELECT size FROM menu WHERE itemID = ?&#39;, [detail])+ &quot;, &quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="76">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="77">

          

          

          <code class="ruby">end</code>

        </li>

      

    </ol>

  </pre>

</div>




      

        <div class="source_table" id="3923d475674caac9ed6dde6e9585df6e4d24e35e">

  <div class="header">

    <h3>ruby/customer/methods.rb</h3>

    <h4><span class="green">100.0 %</span> covered</h4>

    <div>

      <b>0</b> relevant lines. 

      <span class="green"><b>0</b> lines covered</span> and

      <span class="red"><b>0</b> lines missed.</span>

    </div>

  </div>

  

  <pre>

    <ol>

      

    </ol>

  </pre>

</div>




      

        <div class="source_table" id="a05b76a25cd459541248bbc908d5ab1bd4992047">

  <div class="header">

    <h3>ruby/customer/nav.rb</h3>

    <h4><span class="green">100.0 %</span> covered</h4>

    <div>

      <b>14</b> relevant lines. 

      <span class="green"><b>14</b> lines covered</span> and

      <span class="red"><b>0</b> lines missed.</span>

    </div>

  </div>

  

  <pre>

    <ol>

      

        <li class="never" data-hits="" data-linenumber="1">

          

          

          <code class="ruby">#user</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="2">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/user/home&#39; do</code>

        </li>

      

        <li class="covered" data-hits="4" data-linenumber="3">

          <span class="hits">4</span>

          

          <code class="ruby">  permissionCustomer</code>

        </li>

      

        <li class="covered" data-hits="4" data-linenumber="4">

          <span class="hits">4</span>

          

          <code class="ruby">  erb :&quot;user/index&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="5">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="6">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/user/menu&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="7">

          <span class="hits">1</span>

          

          <code class="ruby">  permissionCustomer</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="8">

          <span class="hits">1</span>

          

          <code class="ruby">  @results = @db.execute(&#39;SELECT * FROM menu WHERE city = ?&#39;,[session[:city]])</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="9">

          <span class="hits">1</span>

          

          <code class="ruby">  @arr = Array.new</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="10">

          <span class="hits">1</span>

          

          <code class="ruby">  @results.each do |item|</code>

        </li>

      

        <li class="covered" data-hits="9" data-linenumber="11">

          <span class="hits">9</span>

          

          <code class="ruby">      if (@arr.index item[1]) == nil</code>

        </li>

      

        <li class="covered" data-hits="3" data-linenumber="12">

          <span class="hits">3</span>

          

          <code class="ruby">          @arr.push(item[1])</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="13">

          

          

          <code class="ruby">      end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="14">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="15">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :&quot;user/menu&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="16">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="17">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/user/offers&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="18">

          <span class="hits">1</span>

          

          <code class="ruby">  permissionCustomer</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="19">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :&quot;user/offers&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="20">

          

          

          <code class="ruby">end</code>

        </li>

      

    </ol>

  </pre>

</div>




      

        <div class="source_table" id="9d0bbaed09bef765274a284b76cc8588ea9f40a9">

  <div class="header">

    <h3>ruby/employee/admin/methods.rb</h3>

    <h4><span class="red">6.25 %</span> covered</h4>

    <div>

      <b>80</b> relevant lines. 

      <span class="green"><b>5</b> lines covered</span> and

      <span class="red"><b>75</b> lines missed.</span>

    </div>

  </div>

  

  <pre>

    <ol>

      

        <li class="covered" data-hits="1" data-linenumber="1">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/admin/changeMenu&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="2">

          

          

          <code class="ruby">    @results = @db.execute(&#39;SELECT * FROM menu&#39;)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="3">

          

          

          <code class="ruby">    @submitted = false</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="4">

          

          

          <code class="ruby">    #sanitize values</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="5">

          

          

          <code class="ruby">    @item = params[:item].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="6">

          

          

          <code class="ruby">    @size = params[:size].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="7">

          

          

          <code class="ruby">    @price = params[:price].strip</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="8">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="9">

          

          

          <code class="ruby">    #perform validation</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="10">

          

          

          <code class="ruby">    @item_ok = !@item.nil? &amp;&amp; @item != &quot;&quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="11">

          

          

          <code class="ruby">    @size_ok = !@size.nil? &amp;&amp; @size != &quot;&quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="12">

          

          

          <code class="ruby">    @price_ok = @price =~ /^[+-]?\d+(\.\d+)?$/ &amp;&amp; @price &gt;= &#39;0&#39; &amp;&amp; !@price.nil?</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="13">

          

          

          <code class="ruby">    count = @db.get_first_value(&#39;SELECT COUNT(*) FROM menu WHERE item = ? AND size = ?&#39;,[@item, @size])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="14">

          

          

          <code class="ruby">    @unique = (count == 0)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="15">

          

          

          <code class="ruby">    @all_ok = @item_ok &amp;&amp; @size_ok &amp;&amp; @price_ok &amp;&amp; @unique</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="16">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="17">

          

          

          <code class="ruby">    #add data to the database</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="18">

          

          

          <code class="ruby">    if @all_ok</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="19">

          

          

          <code class="ruby">        #get next available ID</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="20">

          

          

          <code class="ruby">        @itemID = @db.get_first_value(&#39;SELECT COUNT(*) FROM menu&#39;)</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="21">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="22">

          

          

          <code class="ruby">        #do the insert</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="23">

          

          

          <code class="ruby">        @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="24">

          

          

          <code class="ruby">            &#39;INSERT INTO menu VALUES (?, ?, ?, ?, ?)&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="25">

          

          

          <code class="ruby">            [@itemID, @item, @size, @price, session[:city]])</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="26">

          

          

          <code class="ruby">    else</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="27">

          

          

          <code class="ruby">        @submitted = true</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="28">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="29">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="30">

          

          

          <code class="ruby">    erb :&quot;admin/changeMenu&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="31">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="32">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="33">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/admin/changeMenu&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="34">

          

          

          <code class="ruby">    @itemID = params[:itemID]</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="35">

          

          

          <code class="ruby">    @item = params[:item].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="36">

          

          

          <code class="ruby">    @size = params[:size]</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="37">

          

          

          <code class="ruby">    @price = params[:price].strip</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="38">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="39">

          

          

          <code class="ruby">    count = @db.get_first_value(&#39;SELECT COUNT(*) FROM menu WHERE item = ? AND size = ?&#39;,[@item, @size])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="40">

          

          

          <code class="ruby">    @unique = (count == 0)</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="41">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="42">

          

          

          <code class="ruby">    #Sanitisation</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="43">

          

          

          <code class="ruby">    @item_ok = !@item.nil? &amp;&amp; @item != &quot;&quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="44">

          

          

          <code class="ruby">    @price_ok = @price =~ /^[+-]?\d+(\.\d+)?$/ &amp;&amp; !@price.nil? &amp;&amp; @price != &quot;&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="45">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="46">

          

          

          <code class="ruby">    #Inputting to database</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="47">

          

          

          <code class="ruby">    if @item_ok &amp;&amp; @unique</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="48">

          

          

          <code class="ruby">       @db.execute(&#39;UPDATE menu SET item = ? WHERE itemID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="49">

          

          

          <code class="ruby">            [@item, @itemID]) </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="50">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="51">

          

          

          <code class="ruby">    if @unique</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="52">

          

          

          <code class="ruby">       @db.execute(&#39;UPDATE menu SET size = ? WHERE itemID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="53">

          

          

          <code class="ruby">            [@size, @itemID]) </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="54">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="55">

          

          

          <code class="ruby">    if @price_ok</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="56">

          

          

          <code class="ruby">       @db.execute(&#39;UPDATE menu SET price = ? WHERE itemID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="57">

          

          

          <code class="ruby">            [@price, @itemID]) </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="58">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="59">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="60">

          

          

          <code class="ruby">    redirect &#39;/admin/changeMenu&#39; </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="61">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="62">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="63">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="64">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/admin/removeMenu&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="65">

          

          

          <code class="ruby">    @itemID = params[:ID].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="66">

          

          

          <code class="ruby">    @db.execute(&#39;DELETE FROM menu WHERE itemID = (?)&#39;,[@itemID])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="67">

          

          

          <code class="ruby">    redirect &#39;/admin/changeMenu&#39;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="68">

          

          

          <code class="ruby">    puts &quot;Hello&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="69">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="70">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="71">

          

          

          <code class="ruby">#Change user details</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="72">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/admin/updateDetails&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="73">

          

          

          <code class="ruby">    @index = params[:userID]</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="74">

          

          

          <code class="ruby">    @firstname = params[:firstname].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="75">

          

          

          <code class="ruby">    @lastname = params[:lastname].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="76">

          

          

          <code class="ruby">    @address = params[:address].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="77">

          

          

          <code class="ruby">    @email = params[:email].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="78">

          

          

          <code class="ruby">    @homephone = params[:homephone].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="79">

          

          

          <code class="ruby">    @mobphone = params[:mobphone].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="80">

          

          

          <code class="ruby">    @handle = params[:handle].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="81">

          

          

          <code class="ruby">    @city = params[:city]</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="82">

          

          

          <code class="ruby">    @permission = params[:permission].strip</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="83">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="84">

          

          

          <code class="ruby">    #Counts</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="85">

          

          

          <code class="ruby">    @email_count = @db.get_first_value(&#39;SELECT COUNT(*) FROM users WHERE email = ?&#39;,[@email])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="86">

          

          

          <code class="ruby">    @handle_count = @db.get_first_value(&#39;SELECT COUNT(*) FROM users WHERE handle = ?&#39;,[@handle])</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="87">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="88">

          

          

          <code class="ruby">    #Sanitisation</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="89">

          

          

          <code class="ruby">    @firstname_ok = !@firstname.nil? &amp;&amp; @firstname != &quot;&quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="90">

          

          

          <code class="ruby">    @lastname_ok = !@lastname.nil? &amp;&amp; @lastname != &quot;&quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="91">

          

          

          <code class="ruby">    @address_ok = !@address.nil? &amp;&amp; @address != &quot;&quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="92">

          

          

          <code class="ruby">    @email_ok = !@email.nil? &amp;&amp; @email != &quot;&quot; &amp;&amp; (@email_count == 0)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="93">

          

          

          <code class="ruby">    @homephone_ok = !@homephone.nil? &amp;&amp; @homephone != &quot;&quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="94">

          

          

          <code class="ruby">    @mobphone_ok = !@mobphone.nil? &amp;&amp; @mobphone != &quot;&quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="95">

          

          

          <code class="ruby">    @handle_ok = !@handle.nil? &amp;&amp; @handle != &quot;&quot; &amp;&amp; (@handle_count == 0)</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="96">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="97">

          

          

          <code class="ruby">    #Inputting to database</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="98">

          

          

          <code class="ruby">    if @firstname_ok</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="99">

          

          

          <code class="ruby">        @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="100">

          

          

          <code class="ruby">            &#39;UPDATE users SET firstname = ? WHERE userID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="101">

          

          

          <code class="ruby">            [@firstname, @index]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="102">

          

          

          <code class="ruby">        )</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="103">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="104">

          

          

          <code class="ruby">    if @lastname_ok</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="105">

          

          

          <code class="ruby">        @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="106">

          

          

          <code class="ruby">            &#39;UPDATE users SET lastname = ? WHERE userID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="107">

          

          

          <code class="ruby">            [@lastname, @index]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="108">

          

          

          <code class="ruby">        )</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="109">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="110">

          

          

          <code class="ruby">    if @address_ok</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="111">

          

          

          <code class="ruby">        @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="112">

          

          

          <code class="ruby">            &#39;UPDATE users SET address = ? WHERE userID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="113">

          

          

          <code class="ruby">            [@address, @index]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="114">

          

          

          <code class="ruby">        )</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="115">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="116">

          

          

          <code class="ruby">    if @email_ok</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="117">

          

          

          <code class="ruby">        @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="118">

          

          

          <code class="ruby">            &#39;UPDATE users SET email = ? WHERE userID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="119">

          

          

          <code class="ruby">            [@email, @index]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="120">

          

          

          <code class="ruby">        )</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="121">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="122">

          

          

          <code class="ruby">    if @homephone_ok</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="123">

          

          

          <code class="ruby">        @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="124">

          

          

          <code class="ruby">            &#39;UPDATE users SET homephone = ? WHERE userID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="125">

          

          

          <code class="ruby">            [@homephone, @index]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="126">

          

          

          <code class="ruby">        )</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="127">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="128">

          

          

          <code class="ruby">    if @mobphone_ok</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="129">

          

          

          <code class="ruby">        @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="130">

          

          

          <code class="ruby">            &#39;UPDATE users SET mobphone = ? WHERE userID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="131">

          

          

          <code class="ruby">            [@mobphone, @index]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="132">

          

          

          <code class="ruby">        )</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="133">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="134">

          

          

          <code class="ruby">    if @handle_ok</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="135">

          

          

          <code class="ruby">        @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="136">

          

          

          <code class="ruby">            &#39;UPDATE users SET handle = ? WHERE userID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="137">

          

          

          <code class="ruby">            [@handle, @index]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="138">

          

          

          <code class="ruby">        )</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="139">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="140">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="141">

          

          

          <code class="ruby">    @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="142">

          

          

          <code class="ruby">            &#39;UPDATE users SET city = ?, permission = ? WHERE userID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="143">

          

          

          <code class="ruby">            [@city, @permission, @index]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="144">

          

          

          <code class="ruby">        )</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="145">

          

          

          <code class="ruby">    redirect &#39;/admin/changeCustomer&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="146">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="147">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="148">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/admin/removeUser&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="149">

          

          

          <code class="ruby">    @userID = params[:ID].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="150">

          

          

          <code class="ruby">    @permission = params[:permission].strip</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="151">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="152">

          

          

          <code class="ruby">    if @permission != &quot;admin&quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="153">

          

          

          <code class="ruby">        @db.execute(&#39;DELETE FROM users WHERE userID = (?)&#39;,[@userID])</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="154">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="155">

          

          

          <code class="ruby">    redirect &#39;/admin/changeCustomer&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="156">

          

          

          <code class="ruby">end</code>

        </li>

      

    </ol>

  </pre>

</div>




      

        <div class="source_table" id="fbf5b7e1cbf6bcf371f68816b1bdefae39db810f">

  <div class="header">

    <h3>ruby/employee/admin/nav.rb</h3>

    <h4><span class="green">100.0 %</span> covered</h4>

    <div>

      <b>40</b> relevant lines. 

      <span class="green"><b>40</b> lines covered</span> and

      <span class="red"><b>0</b> lines missed.</span>

    </div>

  </div>

  

  <pre>

    <ol>

      

        <li class="never" data-hits="" data-linenumber="1">

          

          

          <code class="ruby">#Admin</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="2">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/admin/home&#39; do</code>

        </li>

      

        <li class="covered" data-hits="8" data-linenumber="3">

          <span class="hits">8</span>

          

          <code class="ruby">  permissionAdmin</code>

        </li>

      

        <li class="covered" data-hits="8" data-linenumber="4">

          <span class="hits">8</span>

          

          <code class="ruby">  erb :&quot;employee/index&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="5">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="6">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/admin/order&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="7">

          <span class="hits">1</span>

          

          <code class="ruby">  permissionAdmin</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="8">

          <span class="hits">1</span>

          

          <code class="ruby">  @submitted = false</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="9">

          <span class="hits">1</span>

          

          <code class="ruby">  @results = @db.execute(&#39;SELECT * FROM orders&#39;)</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="10">

          <span class="hits">1</span>

          

          <code class="ruby">  @tweets = @client.mentions_timeline(tweet_mode: &quot;extended&quot;)</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="11">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :&quot;employee/order&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="12">

          

          

          <code class="ruby">end    </code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="13">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/admin/tweet&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="14">

          <span class="hits">1</span>

          

          <code class="ruby">  permissionAdmin</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="15">

          <span class="hits">1</span>

          

          <code class="ruby">  @submitted = false</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="16">

          <span class="hits">1</span>

          

          <code class="ruby">  @results = @db.execute(&#39;SELECT * FROM orders&#39;)</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="17">

          <span class="hits">1</span>

          

          <code class="ruby">  getTweets</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="18">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :&quot;employee/tweet&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="19">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="20">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/admin/changeOffers&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="21">

          <span class="hits">1</span>

          

          <code class="ruby">  permissionAdmin</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="22">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :&quot;employee/changeOffer&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="23">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="24">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/admin/changeMenu&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="25">

          <span class="hits">1</span>

          

          <code class="ruby">  permissionAdmin</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="26">

          <span class="hits">1</span>

          

          <code class="ruby">  @results = @db.execute(&#39;SELECT * FROM menu&#39;)</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="27">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :&quot;admin/changeMenu&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="28">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="29">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/admin/changeCustomer&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="30">

          <span class="hits">1</span>

          

          <code class="ruby">  permissionAdmin</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="31">

          <span class="hits">1</span>

          

          <code class="ruby">  @results = @db.execute(&#39;SELECT * FROM users&#39;)</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="32">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :&quot;admin/changeCustomer&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="33">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="34">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/admin/analytics&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="35">

          <span class="hits">1</span>

          

          <code class="ruby">  permissionAdmin</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="36">

          <span class="hits">1</span>

          

          <code class="ruby">  @tweets = @client.mentions_timeline()</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="37">

          <span class="hits">1</span>

          

          <code class="ruby">  @month = [&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;May&quot;,&quot;Jun&quot;,&quot;Jul&quot;,&quot;Aug&quot;,&quot;Sep&quot;,&quot;Oct&quot;,&quot;Nov&quot;,&quot;Dec&quot;]</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="38">

          <span class="hits">1</span>

          

          <code class="ruby">  @values1 = Array.new</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="39">

          <span class="hits">1</span>

          

          <code class="ruby">  (1..12).each do |i|</code>

        </li>

      

        <li class="covered" data-hits="12" data-linenumber="40">

          <span class="hits">12</span>

          

          <code class="ruby">      @values1.push(@db.get_first_value(&#39;SELECT COUNT(*) FROM orders WHERE month = ?&#39;,[i]))</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="41">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="42">

          <span class="hits">1</span>

          

          <code class="ruby">  @values2 = Array.new</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="43">

          <span class="hits">1</span>

          

          <code class="ruby">     @values = Array.new</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="44">

          <span class="hits">1</span>

          

          <code class="ruby">  @tweets.each do |tweet|</code>

        </li>

      

        <li class="covered" data-hits="18" data-linenumber="45">

          <span class="hits">18</span>

          

          <code class="ruby">      @values.push(tweet.created_at.month)</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="46">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="47">

          <span class="hits">1</span>

          

          <code class="ruby">  (1..12).each do |i|</code>

        </li>

      

        <li class="covered" data-hits="12" data-linenumber="48">

          <span class="hits">12</span>

          

          <code class="ruby">      @values2.push(@values.count(i))</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="49">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="50">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :&quot;admin/analytics&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="51">

          

          

          <code class="ruby">end</code>

        </li>

      

    </ol>

  </pre>

</div>




      

        <div class="source_table" id="2651f4e9e64456c42f78c78d87ef8ac9c4b7cdca">

  <div class="header">

    <h3>ruby/employee/methods.rb</h3>

    <h4><span class="red">18.37 %</span> covered</h4>

    <div>

      <b>98</b> relevant lines. 

      <span class="green"><b>18</b> lines covered</span> and

      <span class="red"><b>80</b> lines missed.</span>

    </div>

  </div>

  

  <pre>

    <ol>

      

        <li class="covered" data-hits="1" data-linenumber="1">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/addBasket&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="2">

          

          

          <code class="ruby">    @basketIndex = @db.get_first_value(&#39;SELECT COUNT(*) FROM basket&#39;)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="3">

          

          

          <code class="ruby">    idcount = @db.get_first_value(&#39;SELECT COUNT(*) FROM basket WHERE basketIndex = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="4">

          

          

          <code class="ruby">                [@basketIndex])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="5">

          

          

          <code class="ruby">        @IDunique = (idcount == 0)</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="6">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="7">

          

          

          <code class="ruby">        while (!@IDunique)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="8">

          

          

          <code class="ruby">            @basketIndex += 1</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="9">

          

          

          <code class="ruby">            idcount = @db.get_first_value(&#39;SELECT COUNT(*) FROM basket WHERE basketIndex = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="10">

          

          

          <code class="ruby">                [@basketIndex])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="11">

          

          

          <code class="ruby">            @IDunique = (idcount == 0)</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="12">

          

          

          <code class="ruby">        end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="13">

          

          

          <code class="ruby">    @itemID = params[:itemID].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="14">

          

          

          <code class="ruby">    @price =  @db.get_first_value(&#39;SELECT price FROM menu WHERE itemID = ?&#39;, [@itemID])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="15">

          

          

          <code class="ruby">    @db.execute(&#39;INSERT INTO basket VALUES (?,?,?)&#39;,[@basketIndex, @itemID, @price])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="16">

          

          

          <code class="ruby">    redirect &#39;/addOrder&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="17">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="18">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="19">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/removeBasket&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="20">

          

          

          <code class="ruby">    @basketIndex = params[:basketIndex].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="21">

          

          

          <code class="ruby">    @db.execute(&#39;DELETE FROM basket WHERE basketIndex = (?)&#39;,[@basketIndex])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="22">

          

          

          <code class="ruby">    redirect &#39;/addOrder&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="23">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="24">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="25">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/addOrder&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="26">

          

          

          <code class="ruby">    if session[:permission] != &quot;employee&quot; &amp;&amp; session[:permission] != &quot;admin&quot; then</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="27">

          

          

          <code class="ruby">    redirect &quot;#{session[:permission]}/home&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="28">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="29">

          

          

          <code class="ruby">    @submitted = false</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="30">

          

          

          <code class="ruby">    @results = @db.execute(&#39;SELECT * FROM orders&#39;)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="31">

          

          

          <code class="ruby">    @basket = @db.execute(&#39;SELECT * FROM basket&#39;)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="32">

          

          

          <code class="ruby">    @orders = @db.execute(&#39;SELECT * FROM orders&#39;)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="33">

          

          

          <code class="ruby">    @orderdetails = @db.execute(&#39;SELECT * FROM orderdetails&#39;)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="34">

          

          

          <code class="ruby">    @menu = @db.execute(&#39;SELECT * FROM menu&#39;)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="35">

          

          

          <code class="ruby">    @tweet = params[:ID]</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="36">

          

          

          <code class="ruby">    puts @tweet_text</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="37">

          

          

          <code class="ruby">    erb :&quot;employee/addOrder&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="38">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="39">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/addOrder&#39; do</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="40">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="41">

          

          

          <code class="ruby">    @submitted = true</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="42">

          

          

          <code class="ruby">    @basket = @db.execute(&#39;SELECT * FROM basket&#39;)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="43">

          

          

          <code class="ruby">    @userID = params[:userID].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="44">

          

          

          <code class="ruby">    @totalprice = 0 #placeholder for further development</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="45">

          

          

          <code class="ruby">    @time = Time.new</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="46">

          

          

          <code class="ruby">    @completion = &#39;pending&#39; #placeholder for further development</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="47">

          

          

          <code class="ruby">    @basket.each do |item|</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="48">

          

          

          <code class="ruby">             @totalprice += item[2]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="49">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="50">

          

          

          <code class="ruby">    @fulltime = @time.hour.to_s + &quot;:&quot; + @time.min.to_s</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="51">

          

          

          <code class="ruby">    @month = @time.month</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="52">

          

          

          <code class="ruby">    #perform validation</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="53">

          

          

          <code class="ruby">    @userID_ok = !@userID.nil? &amp;&amp; @userID != &quot;&quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="54">

          

          

          <code class="ruby">    @totalprice_ok = @totalprice &gt;= 0 &amp;&amp; !@totalprice.nil?</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="55">

          

          

          <code class="ruby">    @completion_ok = !@completion.nil?</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="56">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="57">

          

          

          <code class="ruby">    @orderID = @db.get_first_value(&#39;SELECT COUNT(*) FROM orders&#39;)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="58">

          

          

          <code class="ruby">    idcount = @db.get_first_value(&#39;SELECT COUNT(*) FROM orders WHERE orderID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="59">

          

          

          <code class="ruby">                [@orderID])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="60">

          

          

          <code class="ruby">        @IDunique = (idcount == 0)</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="61">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="62">

          

          

          <code class="ruby">        while (!@IDunique)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="63">

          

          

          <code class="ruby">            @orderID += 1</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="64">

          

          

          <code class="ruby">            idcount = @db.get_first_value(&#39;SELECT COUNT(*) FROM orders WHERE orderID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="65">

          

          

          <code class="ruby">                [@orderID])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="66">

          

          

          <code class="ruby">            @IDunique = (idcount == 0)</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="67">

          

          

          <code class="ruby">        end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="68">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="69">

          

          

          <code class="ruby">    count = @db.get_first_value(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="70">

          

          

          <code class="ruby">            &#39;SELECT COUNT(*) FROM orders WHERE orderID = ? AND userID = ?</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="71">

          

          

          <code class="ruby">             AND totalprice = ? AND time = ? AND completion = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="72">

          

          

          <code class="ruby">            [@orderID, @fulltime, @userID, @totalprice, @completion])</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="73">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="74">

          

          

          <code class="ruby">    @unique = (count == 0)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="75">

          

          

          <code class="ruby">    @all_ok = @userID_ok &amp;&amp; @totalprice_ok &amp;&amp; @completion_ok &amp;&amp; @unique</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="76">

          

          

          <code class="ruby">    if @all_ok</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="77">

          

          

          <code class="ruby">        @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="78">

          

          

          <code class="ruby">            &#39;INSERT INTO orders VALUES (?,?,?,?,?,?,?)&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="79">

          

          

          <code class="ruby">            [@orderID, @fulltime, @userID, @totalprice,  @completion, @month, session[:city]]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="80">

          

          

          <code class="ruby">         )</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="81">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="82">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="83">

          

          

          <code class="ruby">         @basket.each do |item|</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="84">

          

          

          <code class="ruby">             @db.execute(&#39;INSERT INTO orderdetails VALUES (?,?)&#39;,[@orderID, item[1]])</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="85">

          

          

          <code class="ruby">         end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="86">

          

          

          <code class="ruby">        @db.execute(&#39;DELETE FROM basket&#39;)</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="87">

          

          

          <code class="ruby">        end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="88">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="89">

          

          

          <code class="ruby">    redirect &#39;/admin/order&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="90">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="91">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="92">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/removeOrder&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="93">

          

          

          <code class="ruby">    @deleteIndex = params[:ID]</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="94">

          

          

          <code class="ruby">    @db.execute(&#39;DELETE FROM orders WHERE orderID = (?)&#39;,[@deleteIndex])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="95">

          

          

          <code class="ruby">     @db.execute(&#39;DELETE FROM orderdetails WHERE orderID = (?)&#39;,[@deleteIndex])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="96">

          

          

          <code class="ruby">    redirect &#39;/admin/order&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="97">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="98">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/updateStatus&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="99">

          

          

          <code class="ruby">    @index = params[:orderID]</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="100">

          

          

          <code class="ruby">    @status = params[:status]</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="101">

          

          

          <code class="ruby">    @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="102">

          

          

          <code class="ruby">            &#39;UPDATE orders SET completion = ? WHERE orderID = ?&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="103">

          

          

          <code class="ruby">            [@status, @index]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="104">

          

          

          <code class="ruby">        )</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="105">

          

          

          <code class="ruby">    redirect &#39;/admin/order&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="106">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="107">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="108">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/reply&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="109">

          

          

          <code class="ruby">    @client.update(&quot;@&quot; + params[:name] + &quot; &quot; + params[:message], :in_reply_to_status_id =&gt; params[:id])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="110">

          

          

          <code class="ruby">    redirect &#39;/admin/order&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="111">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="112">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/inputOrder&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="113">

          

          

          <code class="ruby">    @results = @db.execute(&#39;SELECT * FROM orders&#39;)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="114">

          

          

          <code class="ruby">    @submitted = trueb</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="115">

          

          

          <code class="ruby">    @time = Time.now</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="116">

          

          

          <code class="ruby">    @orderString = params[:orderString].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="117">

          

          

          <code class="ruby">    @userID = params[:userID].strip</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="118">

          

          

          <code class="ruby">    @completion = &#39;none&#39; #placeholder for further development</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="119">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="120">

          

          

          <code class="ruby">    @orderString_ok = !@orderString.nil? &amp;&amp; @orderString != &quot;&quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="121">

          

          

          <code class="ruby">    @userID_ok = !@userID.nil? &amp;&amp; @userID != &quot;&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="122">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="123">

          

          

          <code class="ruby">    @both_ok = @orderString_ok &amp;&amp; @userID_ok</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="124">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="125">

          

          

          <code class="ruby">    puts(@both_ok)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="126">

          

          

          <code class="ruby">    if @both_ok</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="127">

          

          

          <code class="ruby">        @orderID = @db.get_first_value(&#39;SELECT COUNT(*) FROM orders&#39;)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="128">

          

          

          <code class="ruby">        @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="129">

          

          

          <code class="ruby">            &#39;INSERT INTO orders VALUES (?,?,?,?,?)&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="130">

          

          

          <code class="ruby">            [@orderID, @time ,@userID, @orderString, @completion]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="131">

          

          

          <code class="ruby">            )</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="132">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="133">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="134">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="135">

          

          

          <code class="ruby">    redirect &#39;/order&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="136">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="137">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="138">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/filterByCity&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="139">

          <span class="hits">1</span>

          

          <code class="ruby">    getTweets</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="140">

          <span class="hits">1</span>

          

          <code class="ruby">    usersFromCity = @db.execute(&quot;SELECT * FROM users WHERE city = &#39;#{params[:city]}&#39;&quot;)</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="141">

          <span class="hits">1</span>

          

          <code class="ruby">    @filteredTweets = Array.new</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="142">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="143">

          

          

          <code class="ruby">    #finding users which have registered in a chosen city</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="144">

          <span class="hits">1</span>

          

          <code class="ruby">    @tweets.each do |tweet|</code>

        </li>

      

        <li class="covered" data-hits="8" data-linenumber="145">

          <span class="hits">8</span>

          

          <code class="ruby">        puts(tweet.user.screen_name)</code>

        </li>

      

        <li class="covered" data-hits="8" data-linenumber="146">

          <span class="hits">8</span>

          

          <code class="ruby">        personsHandle = &#39;@&#39; + tweet.user.screen_name #adding @ </code>

        </li>

      

        <li class="covered" data-hits="8" data-linenumber="147">

          <span class="hits">8</span>

          

          <code class="ruby">        usersFromCity.each do |user|</code>

        </li>

      

        <li class="covered" data-hits="16" data-linenumber="148">

          <span class="hits">16</span>

          

          <code class="ruby">            if personsHandle == user[7]</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="149">

          

          

          <code class="ruby">                puts(user[7] + &#39; == &#39; + personsHandle)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="150">

          

          

          <code class="ruby">                @filteredTweets.push(tweet)</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="151">

          

          

          <code class="ruby">            end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="152">

          

          

          <code class="ruby">        end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="153">

          

          

          <code class="ruby">    end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="154">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="155">

          <span class="hits">1</span>

          

          <code class="ruby">    erb :&quot;function/printTweets&quot; </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="156">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="157">

          

          

          <code class="ruby">end</code>

        </li>

      

    </ol>

  </pre>

</div>




      

        <div class="source_table" id="1f372eaf8b82c8e46ba88d623d8477a04ae4b55b">

  <div class="header">

    <h3>ruby/employee/nav.rb</h3>

    <h4><span class="green">100.0 %</span> covered</h4>

    <div>

      <b>18</b> relevant lines. 

      <span class="green"><b>18</b> lines covered</span> and

      <span class="red"><b>0</b> lines missed.</span>

    </div>

  </div>

  

  <pre>

    <ol>

      

        <li class="never" data-hits="" data-linenumber="1">

          

          

          <code class="ruby">#Employee</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="2">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/employee/home&#39; do</code>

        </li>

      

        <li class="covered" data-hits="5" data-linenumber="3">

          <span class="hits">5</span>

          

          <code class="ruby">  permissionEmployee</code>

        </li>

      

        <li class="covered" data-hits="5" data-linenumber="4">

          <span class="hits">5</span>

          

          <code class="ruby">  erb :&quot;employee/index&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="5">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="6">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="7">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/employee/order&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="8">

          <span class="hits">1</span>

          

          <code class="ruby">  permissionEmployee</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="9">

          <span class="hits">1</span>

          

          <code class="ruby">  @submitted = false</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="10">

          <span class="hits">1</span>

          

          <code class="ruby">  @results = @db.execute(&#39;SELECT * FROM orders&#39;)</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="11">

          <span class="hits">1</span>

          

          <code class="ruby">  @tweets = @client.mentions_timeline(tweet_mode: &quot;extended&quot;)</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="12">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :&quot;employee/order&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="13">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="14">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="15">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/employee/tweet&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="16">

          <span class="hits">1</span>

          

          <code class="ruby">  permissionEmployee</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="17">

          <span class="hits">1</span>

          

          <code class="ruby">  @submitted = false</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="18">

          <span class="hits">1</span>

          

          <code class="ruby">  @results = @db.execute(&#39;SELECT * FROM orders&#39;)</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="19">

          <span class="hits">1</span>

          

          <code class="ruby">  getTweets</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="20">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :&quot;employee/tweet&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="21">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="22">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="23">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/employee/changeOffers&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="24">

          <span class="hits">1</span>

          

          <code class="ruby">  permissionEmployee</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="25">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :&quot;employee/changeOffer&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="26">

          

          

          <code class="ruby">end</code>

        </li>

      

    </ol>

  </pre>

</div>




      

        <div class="source_table" id="d42602e71d27f36c5dcb02df3b4f988174feb9dc">

  <div class="header">

    <h3>ruby/noLogin/methods.rb</h3>

    <h4><span class="red">53.57 %</span> covered</h4>

    <div>

      <b>28</b> relevant lines. 

      <span class="green"><b>15</b> lines covered</span> and

      <span class="red"><b>13</b> lines missed.</span>

    </div>

  </div>

  

  <pre>

    <ol>

      

        <li class="covered" data-hits="1" data-linenumber="1">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/signin&#39; do</code>

        </li>

      

        <li class="covered" data-hits="17" data-linenumber="2">

          <span class="hits">17</span>

          

          <code class="ruby">  if params[:password] == @db.get_first_value(&quot;SELECT password FROM users WHERE handle = ?&quot;, [params[:user]]) then</code>

        </li>

      

        <li class="covered" data-hits="17" data-linenumber="3">

          <span class="hits">17</span>

          

          <code class="ruby">    puts &quot;Login attempt successful&quot;</code>

        </li>

      

        <li class="covered" data-hits="17" data-linenumber="4">

          <span class="hits">17</span>

          

          <code class="ruby">    session[:login] = true</code>

        </li>

      

        <li class="covered" data-hits="17" data-linenumber="5">

          <span class="hits">17</span>

          

          <code class="ruby">    session[:permission] = @db.get_first_value(&quot;SELECT permission FROM users WHERE handle = ?&quot;, params[:user])</code>

        </li>

      

        <li class="covered" data-hits="17" data-linenumber="6">

          <span class="hits">17</span>

          

          <code class="ruby">    session[:firstname] = @db.get_first_value(&quot;SELECT firstname FROM users WHERE handle = ?&quot;, params[:user])</code>

        </li>

      

        <li class="covered" data-hits="17" data-linenumber="7">

          <span class="hits">17</span>

          

          <code class="ruby">    session[:city] = @db.get_first_value(&quot;SELECT city FROM users WHERE handle = ?&quot;, params[:user])</code>

        </li>

      

        <li class="covered" data-hits="17" data-linenumber="8">

          <span class="hits">17</span>

          

          <code class="ruby">    puts session[:permission]</code>

        </li>

      

        <li class="covered" data-hits="17" data-linenumber="9">

          <span class="hits">17</span>

          

          <code class="ruby">      puts session[:city]</code>

        </li>

      

        <li class="covered" data-hits="17" data-linenumber="10">

          <span class="hits">17</span>

          

          <code class="ruby">    redirect &quot;#{@db.get_first_value(&quot;SELECT permission FROM users WHERE handle = ?&quot;, params[:user])}/home&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="11">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="12">

          

          

          <code class="ruby">  redirect &quot;/signIn&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="13">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="14">

          

          

          <code class="ruby"></code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="15">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/signup&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="16">

          <span class="hits">1</span>

          

          <code class="ruby">  @handle_count = @db.get_first_value(&#39;SELECT COUNT(*) FROM users WHERE handle = ?&#39;,[params[:user].strip])</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="17">

          <span class="hits">1</span>

          

          <code class="ruby">  if @handle_count == 0 then</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="18">

          

          

          <code class="ruby">    @db.execute(</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="19">

          

          

          <code class="ruby">      &#39;INSERT INTO users VALUES (?,?,?,?,?,?,?,?,?,?,?)&#39;,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="20">

          

          

          <code class="ruby">      [@db.get_first_value(&#39;SELECT COUNT(*) FROM users&#39;), params[:firstname].strip, params[:lastname].strip, params[:address].strip,</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="21">

          

          

          <code class="ruby">      params[:email].strip, params[:homephone].strip, params[:mobphone].strip, params[:user].strip, &quot;user&quot;, params[:password].strip, params[:city].strip ]</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="22">

          

          

          <code class="ruby">    )</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="23">

          

          

          <code class="ruby">    puts &quot;successfully put into user table&quot;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="24">

          

          

          <code class="ruby">    redirect &#39;/home&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="25">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="26">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="27">

          <span class="hits">1</span>

          

          <code class="ruby">post &#39;/changeView&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="28">

          

          

          <code class="ruby">    session[:city] = params[:city]</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="29">

          

          

          <code class="ruby">    redirect &quot;/menu&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="30">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="31">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/signOut&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="32">

          

          

          <code class="ruby">  session[:login] = false</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="33">

          

          

          <code class="ruby">  session[:permission] = &#39;&#39;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="34">

          

          

          <code class="ruby">  session[:firstname] = &#39;&#39;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="35">

          

          

          <code class="ruby">  session[:city] = &#39;&#39;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="36">

          

          

          <code class="ruby">  puts &#39;Logout successful&#39;</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="37">

          

          

          <code class="ruby">  puts session[:permission]</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="38">

          

          

          <code class="ruby">  redirect &#39;/home&#39;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="39">

          

          

          <code class="ruby">end</code>

        </li>

      

    </ol>

  </pre>

</div>




      

        <div class="source_table" id="9456f6c5c04ff75d88c4307ebc8446768a4d5b1e">

  <div class="header">

    <h3>ruby/noLogin/nav.rb</h3>

    <h4><span class="red">61.11 %</span> covered</h4>

    <div>

      <b>36</b> relevant lines. 

      <span class="green"><b>22</b> lines covered</span> and

      <span class="red"><b>14</b> lines missed.</span>

    </div>

  </div>

  

  <pre>

    <ol>

      

        <li class="never" data-hits="" data-linenumber="1">

          

          

          <code class="ruby">#Nav</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="2">

          

          

          <code class="ruby">#No login</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="3">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/home&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="4">

          <span class="hits">1</span>

          

          <code class="ruby">  if session[:login] then</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="5">

          

          

          <code class="ruby">    redirect &quot;#{session[:permission]}/home&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="6">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="7">

          <span class="hits">1</span>

          

          <code class="ruby">   @results = @db.execute(&#39;SELECT * FROM menu&#39;)</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="8">

          <span class="hits">1</span>

          

          <code class="ruby">   @arr = Array.new</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="9">

          <span class="hits">1</span>

          

          <code class="ruby">  @results.each do |item|</code>

        </li>

      

        <li class="covered" data-hits="15" data-linenumber="10">

          <span class="hits">15</span>

          

          <code class="ruby">      if (@arr.index item[1]) == nil</code>

        </li>

      

        <li class="covered" data-hits="3" data-linenumber="11">

          <span class="hits">3</span>

          

          <code class="ruby">          @arr.push(item[1])</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="12">

          

          

          <code class="ruby">      end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="13">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="14">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :index</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="15">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="16">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/about&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="17">

          <span class="hits">1</span>

          

          <code class="ruby">  if session[:login] then</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="18">

          

          

          <code class="ruby">    redirect &quot;#{session[:permission]}/about&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="19">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="20">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :about</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="21">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="22">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/menu&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="23">

          <span class="hits">1</span>

          

          <code class="ruby">  if session[:login] then</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="24">

          <span class="hits">1</span>

          

          <code class="ruby">    redirect &quot;#{session[:permission]}/menu&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="25">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="26">

          

          

          <code class="ruby">  @results = @db.execute(&#39;SELECT * FROM menu WHERE city = ?&#39;,[session[:city]])</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="27">

          

          

          <code class="ruby">  @arr = Array.new</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="28">

          

          

          <code class="ruby">  @results.each do |item|</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="29">

          

          

          <code class="ruby">      if (@arr.index item[1]) == nil</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="30">

          

          

          <code class="ruby">          @arr.push(item[1])</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="31">

          

          

          <code class="ruby">      end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="32">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="33">

          

          

          <code class="ruby">  erb :menu</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="34">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="35">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/contactPage&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="36">

          

          

          <code class="ruby">    erb :contactPage</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="37">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="38">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/signIn&#39; do</code>

        </li>

      

        <li class="covered" data-hits="17" data-linenumber="39">

          <span class="hits">17</span>

          

          <code class="ruby">  if session[:login] then</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="40">

          

          

          <code class="ruby">    redirect &quot;#{session[:permission]}/signIn&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="41">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="covered" data-hits="17" data-linenumber="42">

          <span class="hits">17</span>

          

          <code class="ruby">  erb :signIn</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="43">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="44">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/signUp&#39; do</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="45">

          <span class="hits">1</span>

          

          <code class="ruby">  if session[:login] then</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="46">

          

          

          <code class="ruby">    redirect &quot;#{session[:permission]}/signUp&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="47">

          

          

          <code class="ruby">  end</code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="48">

          <span class="hits">1</span>

          

          <code class="ruby">  erb :&quot;signUp&quot;</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="49">

          

          

          <code class="ruby">end</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="50">

          

          

          <code class="ruby">    </code>

        </li>

      

        <li class="covered" data-hits="1" data-linenumber="51">

          <span class="hits">1</span>

          

          <code class="ruby">get &#39;/menu&#39; do</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="52">

          

          

          <code class="ruby">  @results = @db.execute(&#39;SELECT * FROM menu&#39;)</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="53">

          

          

          <code class="ruby">  @submitted = false</code>

        </li>

      

        <li class="missed" data-hits="0" data-linenumber="54">

          

          

          <code class="ruby">  erb :menu</code>

        </li>

      

        <li class="never" data-hits="" data-linenumber="55">

          

          

          <code class="ruby">end</code>

        </li>

      

    </ol>

  </pre>

</div>




      

      </div>

    </div>

  </body>

</html>
